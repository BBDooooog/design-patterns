项目分析

## 项目背景

对外提供算法能力
输入 图片 需要某些能力鉴别
输出 是否通过

流程

1. 参数校验
2. 构造上下文
3. 缓存
4. 调用前处理
5. 算法调用
6. 调用后处理
7. 缓存
8. 结果转换返回

问题

1. 灵活支持单独与批量
2. 图片格式不同处理方式不同
    1. gif类似于多个图片
3. 不同类型处理流程不一样


关于扩展
- 步骤变化（调用链模式（只需要增加新功能，动态编制）、模板方法跳过实现（需要频繁改动代码））
- 步骤替换（模板（重写抽象方法（继承））、策略（填充策略实现类（组合）））


## 分析
本质上都是一张图片调用算法去处理，可以看作是一次RPC
前后封装了缓存系统，判断那些类型有缓存

因为核心是调用算法，相同算法的url可以凑一锅
Map<sence, List<URL>>

返回结果必然是希望以URL维度（缓存结果类似），所以还需要转换称
Map<URL,Result<sence>>


可以提供两种形式的入参

url, secen  url下执行相算法检测，符合现实场景

sence, url   不同场景 url有可能不同，  适合累积型批量任务





- 多算法问题
- 异步问题
- 超时问题
- 重试问题

## 思路
思路一：
将上述流程组装成一个单次调用流程 后文称：“流程”
url * sence 表示调用次数
批量的去遍历的调用流程
GIF图通过抽帧可以理解为遍历调用
执行流程中出现错误，可以通过上报自定义异常提前结束流程。

思路二：
流程中涉及大量集合、请求、外部组件。如果都是单独调用，无法发挥最佳性能。
改成遍历调用流程。后文称“批量流程”
GIF图 可以先拆后调用批量流程，最终合并

interface
abstractClass implements interface
GIFConcreteClass extend abstractClass
or
GIFClass include abstractClass








